model_repository: /models  # 도커 내부 경로

profile_models:
  resnet_trt_int8:
    model_config_parameters:
      # Instance Count 실험
      instance_group:
        - kind: KIND_GPU
          count: [1, 2, 4]
      
      # Dynamic Batching Delay 실험
      dynamic_batching:
        max_queue_delay_microseconds: [100, 500, 1000]

    # 부하 테스트 설정 (Perf Analyzer 파라미터)
    parameters:
      concurrency:
        start: 1
        stop: 100
        step: 16  # 2, 34, 66, ... (너무 촘촘하면 오래 걸림)

    # 목표 제약 조건 (항상 만족해야하는 조건)
    # 예: "Latency가 20ms 건하면서 Throughput이 제일 높은 것"
    objectives:
      - perf_throughput
    constraints:
      perf_latency_p99:
        max: 100  # P99 Latency가 20ms 넘어가면 탈락